# 滲透基礎
- 以下內容皆參考他人之網頁。
- 所有內容請用於對自己的設備或環境進行測試，本站不負任何法律責任。
## 流程
1. 偵查(受測)目標
    - google hacking
    - 網站目錄列舉
2. 掃描網路
    - [nmap](https://nmap.org/)
    - [acunetix](https://www.acunetix.com/)
    - [Zmap](https://github.com/zmap/zmap)
3. 漏洞或弱點利用
    - XSS
    - SQL Injection
    - 上傳web shell
    - 密碼破解
    - cve等已知漏洞
4. 提升權限
5. 維持存取

### google hacking
- 參考範例：[GitHub - himynameisdave/GoogleHackMasterList.txt](https://gist.github.com/himynameisdave/809879eb3d14900143ccf621aec24f2e)
- 請參照附檔，如果加上`site:gov.[國家代碼]`或`site:mil.[國家代碼]`更能鎖定(受測)目標。
  - PS([國家代碼] => tw、cn、hk...)

### 網站目錄列舉
- 使用工具(burpsuit)爬網站或暴利列舉(dirb)，找出後台登入點或具權限的特殊頁面。
- 特別注意：`robots.txt`或`.git/head`

### XSS(Cross-site scripting)
- 參考範例：[GitHub - kurobeats/xss_vectors.txt](https://gist.github.com/kurobeats/9a613c9ab68914312cbb415134795b45)
- 建議用burpsuit注入。
- 通常分為以下兩種類型
  - 反射型：從網址注入。
  - 儲存型：經注入會長久存在，通常發生在`留言板`、`問題反應`等頁面。
- 教學影片：https://www.youtube.com/watch?v=rci0bys8wPE

### SQL Injection
- 參考範例：[GitHub - swisskyrepo/PayloadsAllTheThings/SQL injection/](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/SQL%20injection#entry-point-detection)
- 建議用burpsuit注入。
- 透過修改封包測試，回傳封包內含任何錯誤訊息是成功的特徵。
- 教學影片：https://www.youtube.com/watch?v=LUMDDq5IavE

### 上傳web shell
- 參考範例：[GitHub - tennc/webshell](https://github.com/tennc/webshell)
- 建議用burpsuit注入。
- 確認網站程式語言後，透過修改封包上傳web shell。
  - PS((受測)目標防禦機制不盡相同，因此可嘗試多種web shell)
- 教學影片：https://www.youtube.com/watch?v=QjNLTcncH0w

### 密碼破解
- 可能存在的端口

    |Service|Port       |Tool|
    |-------|--         |--|
    |ftp    |21		    |filezilla|
    |ssh    |22		    |putty|
    |telnet |23		    |telnet|
    |smb    |445		|metsaploit auxiliary/scanner/smb/smb_login|
    |rdp    |3389		|遠端桌面|
    |vnc    |9000-9005	|vnc viewer|
    |smtp   |25		    |metasploit auxiliary/scanner/smtp/smtp_enum|

- 參考範例：
  - [https://github.com/brannondorsey/naive-hashcat/releases/download/data/rockyou.txt](https://github.com/brannondorsey/naive-hashcat/releases/download/data/rockyou.txt)
  - 000000、111111、11111111、112233、123123、123321、123456、12345678、654321、666666、888888、abcdef、abcabc、abc123、a1b2c3、aaa111、123qwe、qwerty、qweasd、admin、password、p@ssword、passwd、iloveyou、5201314、asdfghjkl、66666666、88888888、admin888、admin666


### cve等已知漏洞
- 通常透過nmap掃描，先確認版本，再去[google](https://www.google.com.tw)、[github](https://www.github.com)或[exploit-DB](https://www.exploit-db.com/)搜尋『滲透的方法、POC或exploit』


- 範例：
    |Port       |Cve etc.       |Device  |Tool|Remarks|
    |---        |---            |---     |---|---|
    |445,137,139|ms17-010|PC|https://github.com/zzwlpx/ms17010-nsa-EternalBlue|遠端存取|
    |4786|CVE-2018-0171|Router|https://github.com/Sab0tag3d/SIET |遠端存取|
    ||cve2018-20250|PC|https://github.com/WyAtu/CVE-2018-20250|將任意檔案放置指定路徑|
    ||cve2019-6453|PC|https://github.com/proofofcalc/cve-2019-6453-poc|將任意檔案放置並執行|

### 參考
- https://gist.github.com/kurobeats/9a613c9ab68914312cbb415134795b45
- https://baike.baidu.com/item/%E5%BC%B1%E5%AF%86%E7%A0%81#4
- https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/SQL%20injection#entry-point-detection
- 各路大神



